{
  "name": "Oracle Attribute Compare Rule Template",
  "type": "ORACLE",
  "code": "ATTRCOMP",
  "template":[
    "create or replace trigger brg_{code}_{attribute_table}_trigger",
    "before delete or insert or update",
      "on {code}_{attribute_table}",
      "for each row",
    "declare",
      "l_oper varchar2(3);",
      "l_error_stack varchar2(4000);",
    "begin",
      "if inserting",
      "then",
        "l_oper := 'INS';",
      "elsif updating",
      "then",
        "l_oper := 'UPD';",
      "elsif deleting",
      "then",
        "l_oper := 'DEL';",
      "end if;",

    "declare",
      "l_passed boolean := true;",
    "begin",
      "if l_oper in ( 'INS', 'UPD' )",
      "then",
        "l_passed := :new.{attribute_column} {operand} {compare_with};",
      "if not l_passed",
      "then" ,
        "l_error_stack := l_error_stack || {error} ;",
      "end if;" ,
      "end if;" ,
    "end;"
  ]
}